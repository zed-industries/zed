name: "Close Stale Issues"
on:
  schedule:
    - cron: "0 7,9,11 * * 3"
  workflow_dispatch:

jobs:
  stale:
    if: github.repository_owner == 'zed-industries'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@5bef64f19d7facfb25b37b414482c7164d639639 # v9
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          stale-issue-message: >
            Hi there! ðŸ‘‹

            We're working to clean up our issue tracker by closing older bugs that might not be relevant anymore. If you are able to reproduce this issue in the latest version of Zed, please let us know by commenting on this issue, and it will be kept open. If you can't reproduce it, feel free to close the issue yourself. Otherwise, it will close automatically in 14 days.

            Thanks for your help!
          close-issue-message: "This issue was closed due to inactivity. If you're still experiencing this problem, please open a new issue with a link to this issue."
          days-before-stale: 60
          days-before-close: 14
          only-issue-types: "Bug,Crash"
          operations-per-run: 1000
          ascending: true
          enable-statistics: true
          stale-issue-label: "stale"
